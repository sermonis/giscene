<!DOCTYPE html>
<html lang="en">

    <head>

        <title>BIM - Forge Viewer - Basic</title>
        <meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, initial-scale=1, maximum-scale=1.0">
        <link type="text/css" rel="stylesheet" href="../libs/three.js/examples/main.css">

		<link rel="stylesheet" href="https://developer.api.autodesk.com/modelderivative/v2/viewers/style.min.css?v=v7.*" type="text/css">
  		<script language="JavaScript" src="https://developer.api.autodesk.com/modelderivative/v2/viewers/viewer3D.min.js?v=v7.*"></script>

        <style>

			#info {

				color: #000;
				z-index: 1ж

			}

			#info a {

				color: #f00;

			}

			#container {

				width: 100%;
	            height: 100%;
	            margin: 0;
	            background-color: #F0F8FF;

			}

		</style>

    </head>

    <body>

        <div id="container"></div>

        <div id="info">

            <div>
                <a href="https://threejs.org" target="_blank" rel="noopener noreferrer">three.js</a> - Forge Viewer Basic.
            </div>

            <div>
				This <a href="https://forge.autodesk.com/en/docs/viewer/v2/tutorials/basic-viewer/" target="_blank" rel="noopener noreferrer">tutorial</a> takes you through the steps required to load a model translated using the <a href="https://forge.autodesk.com/en/docs/model-derivative/v2/developers_guide/overview/" target="_blank" rel="noopener noreferrer">Model Derivative API</a>.
			</div>

            <div>
				It will then showcase how to change and load a different model into the same Viewer instance.
			</div>

            <div id="message"></div>

        </div>

    </body>

    <script type="module">

		/**
		 * Initialize Viewer.
		 *
		 * @see https://forge.autodesk.com/en/docs/viewer/v7/developers_guide/viewer_basics/initialization/
		 * @see https://forge.autodesk.com/en/docs/viewer/v7/reference/Viewing/GuiViewer3D/
		 */
		const container = document.getElementById( 'container' );
		const viewer = new Autodesk.Viewing.GuiViewer3D( container );

		/**
		 * Sets the current UI theme of the viewer.
		 * Supported values are "light-theme" and "dark-theme",
		 * which is the default.
		 *
		 * @see https://forge.autodesk.com/en/docs/viewer/v6/reference/Viewing/Viewer3D/#settheme-name
		 * @default dark-theme
		 */
		viewer.setTheme( 'light-theme' );

		/**
		 * @see https://forge.autodesk.com/en/docs/viewer/v7/reference/Viewing/#initializer-options-callback
		 */
		const options = {

			/**
			 *
			 */
			'env': 'Local',

			/**
			 *
			 */
			// 'document' : '/models/svf/shaver/0.svf',
			// 'document': '/models/svf/13avt_park/Resource/Модель/{3D} 17318/{3D}.svf',
			// 'document': '/models/svf/dwfx-sample-house/f0224dd3-8767-45c1-ff99-5c9c881b9fee/0.svf', // 3D/2D
			// 'document': '/models/svf/small-revit-sample-house/Resource/3D_View/_3D_/_3D_.svf', // 3D/2D
			'document': '/models/svf/small-revit-sample-house-2/Resource/____/3D/3D.svf', // 3D/2D
			// 'document': '/models/svf/air-traffic-control-tower/1/0.svf',

			'language': 'ru',

			/**
			 * This setting is necessary for Edge Rendering option.
			 *
			 * @see https://stackoverflow.com/questions/54932378/forge-viewer-fails-to-display-edges
			 * @see https://stackoverflow.com/questions/53984588/forge-viewer-failed-to-display-edges-in-settings-for-dwf-dwfx-model
			 * @see https://github.com/Autodesk-Forge/viewer-react-express-headless/issues/28
			 */
			isAEC: true,

		};

		Autodesk.Viewing.Initializer( options, function () {

			viewer.start( options.document, options );

		} );

		viewer.addEventListener ( Autodesk.Viewing.GEOMETRY_LOADED_EVENT, function ( event ) {

			// viewer.removeEventListener( Autodesk.Viewing.GEOMETRY_LOADED_EVENT, arguments.callee );
            viewer.fitToView( true );

			// viewer.autocam.setHomeViewFrom( viewer.navigation.getCamera () );

		} );

    </script>

</html>
